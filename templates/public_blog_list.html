{% load static %}
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Retiree Connect - Experience Sharing & Mentorship">
    <meta name="author" content="">
    <title>{% block title %}Retiree Connect{% endblock %}</title>

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'plugins/bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/themify/css/themify-icons.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/fontawesome/css/all.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/magnific-popup/dist/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/slick-carousel/slick/slick.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/slick-carousel/slick/slick-theme.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <style>
        body {
            background-color: #111;
            color: #bbb;
        }

        /* Navbar */
        .navbar {
            background: #000 !important;
        }

        .navbar .nav-link {
            color: #fff !important;
            transition: 0.3s;
        }

        .navbar .nav-link:hover,
        .navbar .nav-item.active .nav-link {
            color: #b73613 !important;
        }

        .navbar-brand {
            font-weight: bold;
            color: #fff !important;
        }

        .navbar-brand span {
            color: #b73613;
        }

        /* Buttons */
        .btn-brand {
            background-color: #b73613 !important;
            color: #fff !important;
            border-radius: 20px;
            font-size: 0.85rem;
            padding: 4px 14px;
            border: none;
        }

        .btn-brand:hover {
            background-color: #92270e !important;
            color: #fff !important;
        }


        .btn-outline-brand {
            border: 1px solid #b73613;
            color: #b73613;
            border-radius: 20px;
            font-size: 0.85rem;
            padding: 4px 14px;
            transition: 0.3s;
        }

        .btn-outline-brand:hover {
            background-color: #b73613;
            color: #fff;
        }

        /* Footer */
        .footer {
            background: #111;
            color: #bbb;
        }

        .footer h4 {
            color: #b73613;
        }

        .footer a {
            color: #bbb;
            transition: 0.3s;
        }

        .footer a:hover {
            color: #b73613;
        }

        .footer .copyright {
            color: #777;
        }

        .brand-highlight {
            color: #b73613;
        }

        /* Links */
        a {
            color: #b73613;
            text-decoration: none;
        }

        a:hover {
            color: #fff;
            text-decoration: none;
        }

        .navbar .fa-bell {
            font-size: 1.2rem;
            color: #fff;
        }

        .navbar .fa-bell:hover {
            color: #b73613;
        }

        .navbar .nav-link.admin-link {
            color: #f0c674;
            font-weight: 500;
            transition: 0.3s;
        }

        .navbar .nav-link.admin-link:hover {
            color: #b73613;
            text-decoration: underline;
        }
            .public-blogs-section {
        background: linear-gradient(135deg, #0b0b0b 0%, #1a1a1a 50%, #111 100%);
        min-height: 100vh;
        padding: 40px 0;
    }

    .page-header {
        background: linear-gradient(145deg, #111 0%, #1a1a1a 100%);
        border-radius: 20px;
        padding: 40px;
        border: 1px solid #333;
        margin-bottom: 40px;
        text-align: center;
    }

    .page-title {
        color: #fff;
        font-weight: 800;
        font-size: 3rem;
        margin-bottom: 15px;
        background: linear-gradient(135deg, #fff 0%, #b73613 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .page-subtitle {
        color: #ccc;
        font-size: 1.2rem;
        max-width: 600px;
        margin: 0 auto;
    }

    .blogs-container {
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 40px;
    }

    .blogs-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 30px;
    }

    .blog-card {
        background: linear-gradient(145deg, #111 0%, #1a1a1a 100%);
        border-radius: 16px;
        padding: 25px;
        border: 1px solid #333;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        overflow: hidden;
        cursor: pointer;
    }

    .blog-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 3px;
        background: linear-gradient(90deg, transparent, #b73613, transparent);
        transition: left 0.6s ease;
    }

    .blog-card:hover::before {
        left: 100%;
    }

    .blog-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 15px 40px rgba(183, 54, 19, 0.2);
        border-color: #444;
    }

    .blog-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 12px;
        border: 1px solid #444;
        margin-bottom: 15px;
        transition: all 0.3s ease;
    }

    .blog-card:hover .blog-image {
        transform: scale(1.02);
    }

    .blog-category {
        display: inline-block;
        background: linear-gradient(135deg, #b73613 0%, #d44d29 100%);
        color: #fff;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        margin-bottom: 10px;
    }

    .blog-title {
        color: #fff;
        font-weight: 700;
        font-size: 1.3rem;
        margin-bottom: 10px;
        line-height: 1.3;
    }

    .blog-excerpt {
        color: #ccc;
        line-height: 1.5;
        margin-bottom: 15px;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .blog-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #333;
    }

    .blog-author {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .author-avatar {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #333;
    }

    .author-name {
        color: #bbb;
        font-size: 0.9rem;
        font-weight: 500;
    }

    .blog-date {
        color: #777;
        font-size: 0.8rem;
    }

    .blog-stats {
        display: flex;
        gap: 15px;
    }

    .blog-stat {
        display: flex;
        align-items: center;
        gap: 6px;
        color: #bbb;
        font-size: 0.85rem;
    }

    .blog-stat i {
        color: #b73613;
    }

    .sidebar {
        background: linear-gradient(145deg, #111 0%, #1a1a1a 100%);
        border-radius: 16px;
        padding: 25px;
        border: 1px solid #333;
        height: fit-content;
        position: sticky;
        top: 20px;
    }

    .sidebar-section {
        margin-bottom: 30px;
    }

    .sidebar-section:last-child {
        margin-bottom: 0;
    }

    .sidebar-title {
        color: #fff;
        font-weight: 700;
        font-size: 1.2rem;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #b73613;
    }

    .search-box {
        position: relative;
        margin-bottom: 25px;
    }

    .search-input {
        width: 100%;
        background: #1c1c1c;
        border: 1px solid #444;
        color: #fff;
        border-radius: 25px;
        padding: 12px 45px 12px 20px;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }

    .search-input:focus {
        border-color: #b73613;
        box-shadow: 0 0 0 0.2rem rgba(183, 54, 19, 0.25);
    }

    .search-btn {
        position: absolute;
        right: 5px;
        top: 50%;
        transform: translateY(-50%);
        background: #b73613;
        border: none;
        color: #fff;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .search-btn:hover {
        background: #d44d29;
        transform: translateY(-50%) scale(1.1);
    }

    .categories-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .category-item {
        margin-bottom: 8px;
    }

    .category-link {
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #ccc;
        text-decoration: none;
        padding: 8px 12px;
        border-radius: 8px;
        transition: all 0.3s ease;
    }

    .category-link:hover {
        background: #2a2a2a;
        color: #fff;
    }

    .category-count {
        background: #b73613;
        color: #fff;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 600;
    }

    .tags-container {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }

    .tag-link {
        background: #2a2a2a;
        color: #ccc;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        text-decoration: none;
        transition: all 0.3s ease;
        border: 1px solid #444;
    }

    .tag-link:hover {
        background: #b73613;
        color: #fff;
        border-color: #b73613;
        transform: translateY(-2px);
    }

    .recent-post {
        display: flex;
        gap: 12px;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #333;
    }

    .recent-post:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
    }

    .recent-post-image {
        width: 60px;
        height: 60px;
        border-radius: 8px;
        object-fit: cover;
        border: 1px solid #444;
    }

    .recent-post-content {
        flex: 1;
    }

    .recent-post-title {
        color: #fff;
        font-weight: 600;
        font-size: 0.9rem;
        margin-bottom: 5px;
        line-height: 1.3;
    }

    .recent-post-date {
        color: #777;
        font-size: 0.8rem;
    }

    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #666;
        grid-column: 1 / -1;
    }

    .empty-state i {
        font-size: 4rem;
        margin-bottom: 20px;
        display: block;
        color: #444;
    }

    .empty-state h4 {
        color: #bbb;
        margin-bottom: 15px;
    }

    .empty-state p {
        color: #888;
        margin-bottom: 25px;
    }

    .filter-indicator {
        background: linear-gradient(145deg, #111 0%, #1a1a1a 100%);
        border-radius: 12px;
        padding: 15px 20px;
        border: 1px solid #333;
        margin-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .filter-text {
        color: #ccc;
        font-size: 1rem;
    }

    .clear-filter {
        background: #2a2a2a;
        border: 1px solid #444;
        color: #ccc;
        padding: 6px 12px;
        border-radius: 8px;
        text-decoration: none;
        font-size: 0.8rem;
        transition: all 0.3s ease;
    }

    .clear-filter:hover {
        background: #b73613;
        color: #fff;
        border-color: #b73613;
    }

    @media (max-width: 1024px) {
        .blogs-container {
            grid-template-columns: 1fr;
            gap: 30px;
        }
        
        .sidebar {
            position: static;
        }
    }

    @media (max-width: 768px) {
        .page-header {
            padding: 25px;
        }
        
        .page-title {
            font-size: 2.5rem;
        }
        
        .blogs-grid {
            grid-template-columns: 1fr;
        }
        
        .blog-meta {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
    }
    </style>

    {% block head %}{% endblock %}
</head>

<body>
    <!-- Navbar -->
    <header class="navigation">
        <nav class="navbar navbar-expand-lg py-3">
            <div class="container">
                <a class="navbar-brand" href="{% url 'home' %}">
                    Re<span class="brand-highlight">Connect</span>
                </a>
                <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarsExample09" aria-controls="navbarsExample09" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="fa fa-bars" style="color:#fff;"></span>
                </button>

                <div class="collapse navbar-collapse text-center" id="navbarsExample09">
                    <ul class="navbar-nav ml-auto">


                        <!-- Public navbar -->
                        <li class="nav-item active"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">About</a></li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'public_blog_list' %}">Blogs</a>
                        </li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'admin_login' %}">Admin</a></li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle btn btn-sm btn-outline-brand" href="#"
                                id="registerDropdown" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">Register</a>
                            <ul class="dropdown-menu" aria-labelledby="registerDropdown" style="background:#1a1a1a;">
                                <li><a class="dropdown-item" href="{% url 'RRegistration' %}"
                                        style="color:#e3dad8;">Register as
                                        Retiree</a></li>
                                <li><a class="dropdown-item" href="{% url 'SRegistration' %}"
                                        style="color:#e3dad8;">Register as
                                        Seeker</a></li>
                            </ul>
                        </li>
                        <li class="nav-item"><a class="btn btn-sm btn-brand ml-2" href="{% url 'Rlogin' %}">Login</a>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>
    </header>
<main>
    
<section class="public-blogs-section">
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <!-- <h1 class="page-title">Knowledge Hub</h1> -->
            <p class="page-subtitle">
                Discover valuable insights, experiences, and wisdom from our retired mentors
            </p>
        </div>

        <div class="blogs-container">
            <!-- Main Content -->
            <div class="main-content">
                <!-- Filter Indicator -->
                {% if current_category or current_tag or search_query %}
                <div class="filter-indicator">
                    <div class="filter-text">
                        {% if current_category %}
                        Showing blogs in: <strong>{{ current_category.name }}</strong>
                        {% elif current_tag %}
                        Showing blogs with tag: <strong>{{ current_tag.name }}</strong>
                        {% elif search_query %}
                        Search results for: <strong>"{{ search_query }}"</strong>
                        {% endif %}
                    </div>
                    <a href="{% url 'public_blog_list' %}" class="clear-filter">
                        <i class="bi bi-x-circle me-1"></i>Clear Filter
                    </a>
                </div>
                {% endif %}

                <!-- Blogs Grid -->
                {% if blogs %}
                <div class="blogs-grid">
                    {% for blog in blogs %}
                    <div class="blog-card" onclick="window.location.href='{% url 'public_blog_detail' blog.slug %}'">
                        {% if blog.image %}
                        <img src="{{ blog.image.url }}" alt="{{ blog.title }}" class="blog-image">
                        {% endif %}
                        
                        {% if blog.category %}
                        <span class="blog-category">{{ blog.category.name }}</span>
                        {% endif %}
                        
                        <h3 class="blog-title">{{ blog.title }}</h3>
                        
                        <p class="blog-excerpt">
                            {{ blog.excerpt|default:blog.content|truncatewords:25 }}
                        </p>

                        <div class="blog-meta">
                            <div class="blog-author">
                                <img src="{{ blog.author.photo.url }}" alt="{{ blog.author.fname }}" class="author-avatar">
                                <span class="author-name">{{ blog.author.fname }}</span>
                            </div>
                            <small class="blog-date">
                                {{ blog.created_at|date:"M d, Y" }}
                            </small>
                        </div>

                        <div class="blog-stats">
                            <div class="blog-stat">
                                <i class="bi bi-chat"></i>
                                <span>{{ blog.comments_count }} comments</span>
                            </div>
                            <div class="blog-stat">
                                <i class="bi bi-heart"></i>
                                <span>{{ blog.likes_count }} likes</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-state">
                    <i class="bi bi-search"></i>
                    <h4>No Blogs Found</h4>
                    <p>
                        {% if search_query %}
                        No blogs found matching your search criteria. Try different keywords.
                        {% else %}
                        No blogs available at the moment. Please check back later.
                        {% endif %}
                    </p>
                    <a href="{% url 'public_blog_list' %}" class="btn btn-primary-custom">
                        <i class="bi bi-arrow-left me-2"></i>Back to All Blogs
                    </a>
                </div>
                {% endif %}
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Search Box -->
                <div class="search-box">
                    <form method="GET" action="{% url 'public_blog_search' %}">
                        <input type="text" name="q" class="search-input" placeholder="Search blogs..." 
                               value="{{ search_query }}">
                        <button type="submit" class="search-btn">
                            <i class="bi bi-search"></i>
                        </button>
                    </form>
                </div>

                <!-- Categories
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Categories</h3>
                    <ul class="categories-list">
                        {% for category in categories %}
                        <li class="category-item">
                            <a href="{% url 'public_blog_category' category.slug %}" class="category-link">
                                <span>{{ category.name }}</span>
                                <span class="category-count">{{ category.blog_count }}</span>
                            </a>
                        </li>
                        {% empty %}
                        <li class="text-muted">No categories yet</li>
                        {% endfor %}
                    </ul>
                </div> -->

                <!-- Popular Tags
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Popular Tags</h3>
                    <div class="tags-container">
                        {% for tag in popular_tags %}
                        <a href="{% url 'public_blog_tag' tag.slug %}" class="tag-link">
                            {{ tag.name }}
                        </a>
                        {% empty %}
                        <span class="text-muted">No tags yet</span>
                        {% endfor %}
                    </div>
                </div> -->

                <!-- Recent Posts -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Recent Posts</h3>
                    {% for post in recent_posts %}
                    <div class="recent-post">
                        {% if post.image %}
                        <img src="{{ post.image.url }}" alt="{{ post.title }}" class="recent-post-image">
                        {% else %}
                        <div class="recent-post-image" style="background: #333; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-image text-muted"></i>
                        </div>
                        {% endif %}
                        <div class="recent-post-content">
                            <h5 class="recent-post-title">
                                <a href="{% url 'public_blog_detail' post.slug %}" style="color: inherit; text-decoration: none;">
                                    {{ post.title|truncatewords:6 }}
                                </a>
                            </h5>
                            <small class="recent-post-date">{{ post.created_at|date:"M d, Y" }}</small>
                        </div>
                    </div>
                    {% empty %}
                    <p class="text-muted">No recent posts</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

</main>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const blogCards = document.querySelectorAll('.blog-card');
        
        blogCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-8px)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });

        const searchInput = document.querySelector('.search-input');
        const searchForm = document.querySelector('.search-box form');
        
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchForm.submit();
            }
        });
    });
</script>
<footer class="footer section py-5">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-6 col-sm-6">
          <h4 class="text-capitalize mb-4">Company</h4>
          <ul class="list-unstyled footer-menu lh-35">
            <li><a href="#">Terms & Conditions</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Support</a></li>
            <li><a href="#">FAQ</a></li>
          </ul>
        </div>
        <div class="col-lg-2 col-md-6 col-sm-6">
          <h4 class="text-capitalize mb-4">Quick Links</h4>
          <ul class="list-unstyled footer-menu lh-35">
            <li><a href="#">About</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Team</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-6">
          <h4 class="text-capitalize mb-4">Subscribe Us</h4>
          <p>Subscribe to get the latest news & updates.</p>
          <form action="#" class="sub-form">
            <input type="text" class="form-control mb-3" placeholder="Subscribe Now ...">
            <a href="#" class="btn btn-brand btn-small">Subscribe</a>
          </form>
        </div>
        <div class="col-lg-3 ml-auto col-sm-6">
          <div class="logo mb-4">
            <h3>Re<span class="brand-highlight">Connect</span></h3>
          </div>
          <h6><a href="mailto:support@retireeconnect.com">support@retireeconnect.com</a></h6>
          <a href="tel:+91-9876543210"><span class="h4">+91-9876543210</span></a>
        </div>
      </div>

      <div class="footer-btm pt-4 mt-4 border-top" style="border-color:#333;">
        <div class="row">
          <div class="col-lg-6">
            <div class="copyright">
              &copy; {{ year }} RetireeConnect. All rights reserved.
            </div>
          </div>
          <div class="col-lg-6 text-lg-right text-sm-left">
            <ul class="list-inline footer-socials">
              <li class="list-inline-item"><a href="#"><i class="ti-facebook mr-2"></i>Facebook</a></li>
              <li class="list-inline-item"><a href="#"><i class="ti-twitter mr-2"></i>Twitter</a></li>
              <li class="list-inline-item"><a href="#"><i class="ti-linkedin mr-2"></i>LinkedIn</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- JS -->
  <script src="{% static 'plugins/jquery/jquery.js' %}"></script>
  <script src="{% static 'plugins/bootstrap/js/popper.js' %}"></script>
  <script src="{% static 'plugins/bootstrap/js/bootstrap.min.js' %}"></script>
  <script src="{% static 'plugins/magnific-popup/dist/jquery.magnific-popup.min.js' %}"></script>
  <script src="{% static 'plugins/slick-carousel/slick/slick.min.js' %}"></script>
  <script src="{% static 'plugins/counterup/jquery.waypoints.min.js' %}"></script>
  <script src="{% static 'plugins/counterup/jquery.counterup.min.js' %}"></script>
  <script src="{% static 'plugins/google-map/map.js' %}"></script>
  <script src="{% static 'js/script.js' %}"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>

